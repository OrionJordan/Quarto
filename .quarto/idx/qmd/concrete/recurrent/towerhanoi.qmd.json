{"title":"The Tower of Hanoi","markdown":{"yaml":{"title":"The Tower of Hanoi","format":{"html":{"toc":true,"html-math-method":"katex"}}},"headingText":"The problem","containsRefs":false,"markdown":"\n\n\nThe Tower of Hanoi is a problem proposed by Edouard Lucas in 1883.\nWe are given a tower of eight disks stacked in decreasing size on one of three pegs. The objective is to transfer the disks from one peg to another, only moving one disk at a time, and never moving a larger disk onto a smaller one.\n\nSay that $T_n$ is the minimum number of moves to transfer a tower of size $n$ to another peg. It is clear $T_1 = 1$, and that $T_2 = 3$. Additionally, one could say $T_0 = 0$.\n\nWhen given a tower of size $n$, it takes $T_{n-1}$ moves to move the $n-1$ smaller tower onto another peg, one move to move the largest disk onto the desired peg, and then another $T_{n-1}$ moves to move the tower of size $n$ onto the largest disk. This gives us a general formula\n\n$$\nT_0 = 0;\\\\\nT_n = 2T_{n-1} + 1 \n$$ {#eq-recurrence}\n\nA set of inequalities like the one shown in $\\left(1\\right)$ is called a [**recurrence**]{style=\"color: blue\"}. Defined by an intial value ($T_0 = 0$) and then a general value in terms of an earlier one $T_{n} = 2T_{n-1} + 1$.\n\nThough finding a numerical value becomes tedious when $n$ is large enough. What would reduce computation time is a 'closed form' for $T_n$, one that can be evaluated without knowing $T_n$ for all smaller values of $n$.\n\nCalculating the first few values of $T$, we get $T_1 = 1$, $T_2 = 3$, $T_3 = 7$, $T_4 = 15$, ect. It would appear that\n$$\nT_n = 2^n - 1 \\quad \\text{for } n \\geq 0\n$${#eq-guess}\n\nBut this is not a proof. We can manually confirm it to be true for many values of $n$, but in order to prove it for all values of $n$, we will have to use induction.\n\n::: {.callout-note icon=\"false\"}\n## Proof\n\nWe want to show\n\n$$\nT_n = 2^n - 1.\n$$\n\nWe use $n = 0$ for our basis, which works as $2^0 - 1 = 0$.\n\nBy the induction hypothesis\n\n$$\nT_n = 2T_{n-1} + 1 = 2(2^{n-1} - 1) + 1 = 2^n - 1 \n$$\n\nAnd thus $T_n = 2^n - 1$ for all $n$.\n\n:::\n\nSo we get \n\nIn order to solve this problem, we first found a mathematical expression that allowed us to solve the problem for any number of disks, and then found a closed form for our mathematical expression. The book will focus primarily on finding these closed forms of mathematical expression, and without using a lucky guess to find the closed form. \n\nIntrestingly enough, our recurrence from $(1)$ can be simplified by adding $1$ to both sides of the equation:\n\n$$\nT_0 + 1 = 1\\\\\nT_n + 1 = 2T_{n-1} + 2\n$$\n \nNow if we let $U_n = T_n + 1$, we get\n\n$$\nU_0 = 1\\\\\nU_n = 2U_{n-1}\n$$ {#eq-simprec}\n\nIt is pretty clear that our closed formula is $U_n = 2^n$; thus $T_n = 2^n - 1$.\n\n## Linear Problem\n\nNow that we have an understanding for the general problem, we can begin making some alterations. In the linear problem, we label the pegs $A,B$ and $C$. A disk can only be moved from peg $A$ to peg $B$, and peg $B$ to peg $C$.\n\nWe are tasked with finding the shortest number of moves to get a tower of size $n$ from peg $A$ to peg $C$. Let this minimum be given by $L(n)$. \n\nThe only way to move the bottom disk $n$ is to have the entire tower of $n-1$ disks on peg $C$. Then we can move disk $n$ onto peg $B$. The only way to move the disk forward again is if the $n-1$ tower is on peg $A$ now. We can now move disk $n$ to peg $C$, and the tower back onto peg $C$. This gives us the following recurrence\n\n$$\nL(0) = 0\\\\\nL(n) = 3L(n-1) + 2\n$$\n\nUsing our previous simplification trick, let $U(n) = L(n) + 1$.\n\n$$\nU(n) = L(n) + 1 = 3L(n-1) + 3 = 3(L(n-1) + 1) = 3U(n-1)\\\\\n$$\n\nThus we get the closed formula\n\n$$\nL(n) = 3^n - 1\n$$\n\n## Cyclic Problem\n\nImagine that you could only make clockwise moves. That is, $A$ to $B$, $B$ to $C$, and $C$ to $A$. We let $Q(n)$ be the minimum number of moves to get a tower of size $n$ from peg $A$ to peg $B$, and $R(n)$ to reverse $Q(n)$, that is get a tower from peg $B$ to $A$.\n\nFor this problem, we will define $Q$ and $R$ in terms of each other, and solve the recurrence in a later chapter. Starting with $Q(n)$, one can notice by moving the top $n-1$ disks back, the largest disk forward, and then the top $n-1$ disks back, we get\n\n$$\nQ(0) = 0\\\\\nQ(n) = 2R(n-1) + 1\n$$\n\nSimilary for $R(n)$, we can move the top $n-1$ back a peg, the bottom disk forward a peg, the top $n-1$ back to their starting peg, move the bottom peg once more, and then move the top $n-1$ back. This gets us\n\n$$\nR(n) = R(n-1) + 1 + Q(n-1) + 1 + R(n-1)\\\\\nR(n) = 2R(n-1) + Q(n-1) + 2\\\\\nR(n) = Q(n) + Q(n-1) + 1\n$$\n\n## Multiple disks\n\nWhat if we have a tower of $2n$ disks of $n$ sizes. That is we have two disks of each size, which are indistinguishable. After a little tinkering it's clear that it is never beneficial to split the disks up, therefore the optimal solution is just doubling our initial solution. Letting $D(n)$ be the optimal number of moves to move a stack,\n\n$$\nD(n) = 2T(n).\n$$\n\nThis problem becomes interesting if we let the two disks be distinguishable, and we wish to create the original tower. Let the minimum number of moves for this tower be $DD(n)$. One may think this could be easily by moving the top $n-1$ towers in this fashion, move the bottom two disks, move $n-1$ back, move the bottom two, and then the top $n-1$ back on top. This gives us\n\n$$\nDD(n) = 3DD(n-1) + 4\n$$\n\nUnfortunetly induction immeditly fails, as $DD(1)$ is $3$. Notice that if we move all the disks of any size $k$ an even number of times, they'll be oriented right. We can minimize $DD(n)$ by moving the bottom disks $3$ times into the right orientation, and all the others an even number of times. Try it out, and notice how we get the following\n\n$$\nDD(n) = 4D(n-1) + 3\n$$\n\nThis works with induction, and can be simplified to give us\n\n```{=tex}\n\\begin{array}{ll}\nDD(n) &= 4D(n-1) + 3 = 8T(n-1) + 3 = 8(2^{n-1} - 1) + 3\\\\\n&=  2^{n+2} - 5 = 2^n - 1\n\\end{array}\n```","srcMarkdownNoYaml":"\n\n## The problem\n\nThe Tower of Hanoi is a problem proposed by Edouard Lucas in 1883.\nWe are given a tower of eight disks stacked in decreasing size on one of three pegs. The objective is to transfer the disks from one peg to another, only moving one disk at a time, and never moving a larger disk onto a smaller one.\n\nSay that $T_n$ is the minimum number of moves to transfer a tower of size $n$ to another peg. It is clear $T_1 = 1$, and that $T_2 = 3$. Additionally, one could say $T_0 = 0$.\n\nWhen given a tower of size $n$, it takes $T_{n-1}$ moves to move the $n-1$ smaller tower onto another peg, one move to move the largest disk onto the desired peg, and then another $T_{n-1}$ moves to move the tower of size $n$ onto the largest disk. This gives us a general formula\n\n$$\nT_0 = 0;\\\\\nT_n = 2T_{n-1} + 1 \n$$ {#eq-recurrence}\n\nA set of inequalities like the one shown in $\\left(1\\right)$ is called a [**recurrence**]{style=\"color: blue\"}. Defined by an intial value ($T_0 = 0$) and then a general value in terms of an earlier one $T_{n} = 2T_{n-1} + 1$.\n\nThough finding a numerical value becomes tedious when $n$ is large enough. What would reduce computation time is a 'closed form' for $T_n$, one that can be evaluated without knowing $T_n$ for all smaller values of $n$.\n\nCalculating the first few values of $T$, we get $T_1 = 1$, $T_2 = 3$, $T_3 = 7$, $T_4 = 15$, ect. It would appear that\n$$\nT_n = 2^n - 1 \\quad \\text{for } n \\geq 0\n$${#eq-guess}\n\nBut this is not a proof. We can manually confirm it to be true for many values of $n$, but in order to prove it for all values of $n$, we will have to use induction.\n\n::: {.callout-note icon=\"false\"}\n## Proof\n\nWe want to show\n\n$$\nT_n = 2^n - 1.\n$$\n\nWe use $n = 0$ for our basis, which works as $2^0 - 1 = 0$.\n\nBy the induction hypothesis\n\n$$\nT_n = 2T_{n-1} + 1 = 2(2^{n-1} - 1) + 1 = 2^n - 1 \n$$\n\nAnd thus $T_n = 2^n - 1$ for all $n$.\n\n:::\n\nSo we get \n\nIn order to solve this problem, we first found a mathematical expression that allowed us to solve the problem for any number of disks, and then found a closed form for our mathematical expression. The book will focus primarily on finding these closed forms of mathematical expression, and without using a lucky guess to find the closed form. \n\nIntrestingly enough, our recurrence from $(1)$ can be simplified by adding $1$ to both sides of the equation:\n\n$$\nT_0 + 1 = 1\\\\\nT_n + 1 = 2T_{n-1} + 2\n$$\n \nNow if we let $U_n = T_n + 1$, we get\n\n$$\nU_0 = 1\\\\\nU_n = 2U_{n-1}\n$$ {#eq-simprec}\n\nIt is pretty clear that our closed formula is $U_n = 2^n$; thus $T_n = 2^n - 1$.\n\n## Linear Problem\n\nNow that we have an understanding for the general problem, we can begin making some alterations. In the linear problem, we label the pegs $A,B$ and $C$. A disk can only be moved from peg $A$ to peg $B$, and peg $B$ to peg $C$.\n\nWe are tasked with finding the shortest number of moves to get a tower of size $n$ from peg $A$ to peg $C$. Let this minimum be given by $L(n)$. \n\nThe only way to move the bottom disk $n$ is to have the entire tower of $n-1$ disks on peg $C$. Then we can move disk $n$ onto peg $B$. The only way to move the disk forward again is if the $n-1$ tower is on peg $A$ now. We can now move disk $n$ to peg $C$, and the tower back onto peg $C$. This gives us the following recurrence\n\n$$\nL(0) = 0\\\\\nL(n) = 3L(n-1) + 2\n$$\n\nUsing our previous simplification trick, let $U(n) = L(n) + 1$.\n\n$$\nU(n) = L(n) + 1 = 3L(n-1) + 3 = 3(L(n-1) + 1) = 3U(n-1)\\\\\n$$\n\nThus we get the closed formula\n\n$$\nL(n) = 3^n - 1\n$$\n\n## Cyclic Problem\n\nImagine that you could only make clockwise moves. That is, $A$ to $B$, $B$ to $C$, and $C$ to $A$. We let $Q(n)$ be the minimum number of moves to get a tower of size $n$ from peg $A$ to peg $B$, and $R(n)$ to reverse $Q(n)$, that is get a tower from peg $B$ to $A$.\n\nFor this problem, we will define $Q$ and $R$ in terms of each other, and solve the recurrence in a later chapter. Starting with $Q(n)$, one can notice by moving the top $n-1$ disks back, the largest disk forward, and then the top $n-1$ disks back, we get\n\n$$\nQ(0) = 0\\\\\nQ(n) = 2R(n-1) + 1\n$$\n\nSimilary for $R(n)$, we can move the top $n-1$ back a peg, the bottom disk forward a peg, the top $n-1$ back to their starting peg, move the bottom peg once more, and then move the top $n-1$ back. This gets us\n\n$$\nR(n) = R(n-1) + 1 + Q(n-1) + 1 + R(n-1)\\\\\nR(n) = 2R(n-1) + Q(n-1) + 2\\\\\nR(n) = Q(n) + Q(n-1) + 1\n$$\n\n## Multiple disks\n\nWhat if we have a tower of $2n$ disks of $n$ sizes. That is we have two disks of each size, which are indistinguishable. After a little tinkering it's clear that it is never beneficial to split the disks up, therefore the optimal solution is just doubling our initial solution. Letting $D(n)$ be the optimal number of moves to move a stack,\n\n$$\nD(n) = 2T(n).\n$$\n\nThis problem becomes interesting if we let the two disks be distinguishable, and we wish to create the original tower. Let the minimum number of moves for this tower be $DD(n)$. One may think this could be easily by moving the top $n-1$ towers in this fashion, move the bottom two disks, move $n-1$ back, move the bottom two, and then the top $n-1$ back on top. This gives us\n\n$$\nDD(n) = 3DD(n-1) + 4\n$$\n\nUnfortunetly induction immeditly fails, as $DD(1)$ is $3$. Notice that if we move all the disks of any size $k$ an even number of times, they'll be oriented right. We can minimize $DD(n)$ by moving the bottom disks $3$ times into the right orientation, and all the others an even number of times. Try it out, and notice how we get the following\n\n$$\nDD(n) = 4D(n-1) + 3\n$$\n\nThis works with induction, and can be simplified to give us\n\n```{=tex}\n\\begin{array}{ll}\nDD(n) &= 4D(n-1) + 3 = 8T(n-1) + 3 = 8(2^{n-1} - 1) + 3\\\\\n&=  2^{n+2} - 5 = 2^n - 1\n\\end{array}\n```"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"html-math-method":"katex","output-file":"towerhanoi.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","title":"The Tower of Hanoi"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}